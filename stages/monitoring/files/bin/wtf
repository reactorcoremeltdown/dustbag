#!/usr/bin/env bash

IFS=$'\n'

CHECKS=$(curl -s http://localhost:8881/ | jq -cr '.[]')

for check in ${CHECKS}; do
    source <(echo "${check}" | jq -r '. | to_entries[] | [.key,(.value|@sh)] | join("=")')
    case ${Status} in
        "0")
            echo -en "\e[32m⛊\e[0m "
            ;;
        "1")
            echo -en "\e[33m⛊\e[0m "
            ;;
        "2")
            echo -en "\e[31m⛊\e[0m "
            ;;
    esac
done

echo ""
